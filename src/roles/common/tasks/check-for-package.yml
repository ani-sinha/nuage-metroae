---
- name: Check if package is installed (ignoring errors)
  command: rpm -q "{{ package_name }}"
  register: rpm_check
  warn: no
  ignore_errors: True

- name: Fail if package is not installed
  assert:
    that: "rpm_check.rc == 0"
    msg: "{{ package_name }} package is not installed. Please install or run setup.sh and try again."

