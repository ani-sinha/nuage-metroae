---
# TODO: temporarily remove for testing
# - name: Set VSD image location
#   include_role:
#     name: common
#     tasks_from: vsd-find-image.yml

- name: Set vsds_check
  set_fact: vsds_check={{vsds is defined}}

- name: Assign empty list to vsds if it is undefined
  set_fact: vsds= default([])
  when: not vsds_check

- name: Create host_vars files for vsd
  template: src=vsd.j2 backup=no dest={{ inventory_dir }}/host_vars/{{ item.hostname }}
  with_items: "{{ vsds }}"
  when: vsds_check
