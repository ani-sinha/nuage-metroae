- name: Get monit summary for all stats process on VSD
  vsd_monit:
    state: group_summary
    group: vsd-stats
  register: chk
  remote_user: "root"

- name: Verify elasticsearch-status program on VSD
  fail: msg="Cannot verify elasticsearch-status. Program not running"
  when: chk['state']['elasticsearch-status'] != "status ok"

- name: Verify tca-daemon-status program on VSD
  fail: msg="Cannot verify tca-daemon-status. Program not running"
  when: chk['state']['tca-daemon-status'] != "status ok"

- name: Verify stats-collector-status program on VSD
  fail: msg="Cannot verify stats-collector-status. Program not running"
  when: chk['state']['stats-collector-status'] != "status ok"

