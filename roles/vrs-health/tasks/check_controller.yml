---
# Check connection to controller
- name: Check connection to Active controller
  shell: "ovs-vsctl show | grep -Pzl '(?s)Controller \"ctrl1\".*\\n.*target: \"tcp:{{ active_controller_addr }}:6633\"\\n.*role: master\\n.*is_connected: true'"
  register: command_result
  changed_when: false

- name: Check connection to Standby controller
  shell: "ovs-vsctl show | grep -Pzl '(?s)Controller \"ctrl2\".*\\n.*target: \"tcp:{{ standby_controller_addr }}:6633\"\\n.*role: slave\\n.*is_connected: true'"
  register: command_result
  changed_when: false
  ignore_errors: yes
