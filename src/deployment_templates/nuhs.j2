###############################################################################
# Nuage Utility Host VM
#
# Configuration for Nuage Utility Host VM.
#
# Automatically generated by {{ generator_script | default("script") }}.
#

{% if nuhs is defined and nuhs %}
{% for item in nuhs %}
#
# NUH {{ loop.index }}
#
-
    ##### Management Interface

    # < Hostname >
    # Hostname of the Nuage Utility Host instance
    #
    hostname: "{{ item.hostname }}"

    # < Management IP address >
    # IP address of the management interface
    #
    mgmt_ip: "{{ item.mgmt_ip }}"

    # < Management IP Prefix Length >
    # IP Prefix length for the management network
    #
    mgmt_ip_prefix: {{ item.mgmt_ip_prefix }}

    # < Management Gateway IP >
    # IP address of the gateway on the management network
    #
    mgmt_gateway: "{{ item.mgmt_gateway }}"

    ##########################

    ##### Other parameters

    # < Target Server IP or FQDN >
    # Hostname or IP address of the KVM hypervisor where the DNS VM will be instantiated
    #
    target_server: "{{ item.target_server }}"

    # < Timezone >
    # Timezone of the NUH
    #
    {%- if item.timezone is defined %}
    timezone: "{{ item.timezone }}"
    {%- else %}
    # timezone: America/Toronto
    {%- endif %}

    # < Health monitoring agent >
    # Enables setup of a health monitoring agent
    # (none, zabbix) 
    #
    {%- if item.health_monitoring_agent is defined %}
    health_monitoring_agent: "{{ item.health_monitoring_agent }}"
    {%- else %}
    # health_monitoring_agent: none
    {%- endif %}

    # < KVM cpuset information >
    # Cpuset information for cpu pinning on KVM. For example, NUH requires 4 cores and sample values will be of the form [ 0, 1, 2, 3 ]
    #
    {%- if item.cpuset is defined %}
    cpuset: [ {% for i in item.cpuset | default([]) %}{{ i }}, {% endfor %}]
    {%- else %}
    # cpuset: []
    {%- endif %}

    ######################

{% endfor %}
{% else %}
[ ]
{% endif %}
