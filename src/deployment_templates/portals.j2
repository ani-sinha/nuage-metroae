###############################################################################
# Nuage SD-WAN Portal
#
# Configuration for Nuage SD-WAN Portal.
#
# Automatically generated by {{ generator_script | default("script") }}.
#

{% if portals is defined and portals %}
{% for item in portals %}
#
# Portal {{ loop.index }}
#
-
    # < IP or FQDN >
    # Hostname or IP address of the VM
    #
    hostname: "{{ item.hostname }}"

    # < SD-WAN Portal FQDN >
    # For Clustered SD-WAN Portal, the FQDN of the Docker cluster; For standalone Portal, the FQDN of the single Docker host
    #
    sdwan_portal_fqdn: "{{ item.sdwan_portal_fqdn }}"

    # < VSD FQDN >
    # FQDN of the VSD or VSD cluster for this VSTAT
    #
    vsd_fqdn: "{{ item.vsd_fqdn }}"

    # < VSD API/Architect username >
    # Username for API authentication. Must have csproot privileges.
    #
    vsd_auth_username: "{{ item.vsd_auth_username }}"

    # < VSD API/Architect Password >
    # Password for API authentication. Must have csproot privileges.
    #
    vsd_auth_password: {{ item.vsd_auth_password | indent(8, False) }}

    # < VSD Enterprise >
    # Enterprise name used for authentication with VSD Architect. Required for tasks during Upgrade, Health Checks etc
    #
    vsd_auth_enterprise: "{{ item.vsd_auth_enterprise }}"

    # < Management IP address >
    # Management network IP address for the VSTAT
    #
    {%- if item.vstats_ip is defined %}
    vstats_ip: "{{ item.vstats_ip }}"
    {%- else %}
    # vstats_ip: ""
    {%- endif %}

    # < Reset Email >
    # Sender Email address used for password resets.
    #
    {%- if item.password_reset_email is defined %}
    password_reset_email: "{{ item.password_reset_email }}"
    {%- else %}
    # password_reset_email: ""
    {%- endif %}

    # < New account Email >
    # Sender Email address used for new accounts.
    #
    {%- if item.new_account_email is defined %}
    new_account_email: "{{ item.new_account_email }}"
    {%- else %}
    # new_account_email: ""
    {%- endif %}

    # < Forgot password sender Email >
    # Sender Email address used for forgotten password.
    #
    {%- if item.forgot_password_email is defined %}
    forgot_password_email: "{{ item.forgot_password_email }}"
    {%- else %}
    # forgot_password_email: ""
    {%- endif %}

    ##### Management Interface

    # < SMTP FQDN >
    # SMTP server hostname user for account management
    #
    {%- if item.smtp_fqdn is defined %}
    smtp_fqdn: "{{ item.smtp_fqdn }}"
    {%- else %}
    # smtp_fqdn: ""
    {%- endif %}

    # < SMTP port >
    # SMTP port for mail delivery
    #
    {%- if item.smtp_port is defined %}
    smtp_port: {{ item.smtp_port }}
    {%- else %}
    # smtp_port: 25
    {%- endif %}

    # < SMTP Secure >
    # Flag to indicate whether to use authentication for SMTP server
    #
    {%- if item.smtp_secure is defined %}
    smtp_secure: {{ item.smtp_secure | lower }}
    {%- else %}
    # smtp_secure: False
    {%- endif %}

    # < SMTP username >
    # Username for SMTP authentication
    #
    {%- if item.smtp_auth_username is defined %}
    smtp_auth_username: "{{ item.smtp_auth_username }}"
    {%- else %}
    # smtp_auth_username: ""
    {%- endif %}

    # < SMTP password >
    # Password for SMTP authentication
    #
    {%- if item.smtp_auth_password is defined %}
    smtp_auth_password: "{{ item.smtp_auth_password }}"
    {%- else %}
    # smtp_auth_password: ""
    {%- endif %}

    # < Portal SSL >
    # Flag to indicate whether to use SSL
    #
    {%- if item.sdwan_portal_secure is defined %}
    sdwan_portal_secure: {{ item.sdwan_portal_secure | lower }}
    {%- else %}
    # sdwan_portal_secure: False
    {%- endif %}

{% endfor %}
{% else %}
[ ]
{% endif %}
