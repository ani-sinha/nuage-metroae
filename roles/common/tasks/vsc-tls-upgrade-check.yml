- name: check for TLS configuration on vsc
  sros_command:
    commands:
      - admin display-config
    provider: "{{ vsc_creds }}"
  register: tls_result
  
- name: set TLS profile json
  set_fact: 
    vswitch_controller_json: "{{ tls_result.stdout[0]| vsc_vswitch_controller_tls_profile_to_json }}" 
    
- name: set secure communication flag
  set_fact:
    secure_communication: "{{ \"{{vswitch_controller_json['tls-profile']}}\" | ternary (True, False) }}"
  