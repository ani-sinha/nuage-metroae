
- name: "Search for {{ pattern }} File"
  find:
    path: "{{ nuage_unzipped_files_dir }}"
    pattern: "{{ pattern }}"
    recurse: yes
  register: rc_file

- debug: var=rc_file verbosity=1

- name: Register proper path and image locations for use in other playbooks
  set_fact:
    image_path: "{{ rc_file.files[0].path | dirname }}"
    image_file_name: "{{ rc_file.files[0].path | basename }}"
  when: rc_file.matched > 0

- name: Register proper path and image locations for use in other playbooks
  set_fact:
    image_path: MISSING
    image_file_name: MISSING
    missing_image_file: true
  when: rc_file.matched <= 0
