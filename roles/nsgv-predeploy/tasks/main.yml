---

- include_role:
    name: check-node-reachability

- name: Set fact for NSG-V present
  set_fact:
    nsgv_present: "{{ node_reachable }}"

- include: kvm.yml
  when: target_server_type | match("kvm")
  static: no
  tags:
    - nsgv
    - nsgv-predeploy

- include: aws.yml
  when: target_server_type | match("aws")
  static: no
  tags:
    - nsgv
    - nsgv-predeploy
    - aws

- include: vcenter.yml
  when: target_server_type | match("vcenter")
  static: no
  tags:
    - nsgv
    - nsgv-predeploy
